<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<title>Canvas Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="canvas-test.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>


	</head>

	<body>

    <div id="infoBox">
      Hello
    </div>
    <canvas id="canvas" width="50vh" height="50vh">

    </canvas>

    </div>

    <script>
    
      var canvas = document.getElementById("canvas");
      var ctx = canvas.getContext("2d");
      var blocks = [];
      var i, x, y;

      var boardWidth = 10;
      var boardHeight = 20;

      //--Relative sizes--
      var blockSizeRelative = 10;
      var frameSizeRelative = 1;
      var gapSizeRelative = 0.5;
      var canvasHeightRelative = blockSizeRelative*boardHeight + gapSizeRelative*(boardHeight+1); 
      var canvasWidthRelative = blockSizeRelative*boardWidth + gapSizeRelative*(boardWidth+1); 

      var boardWidthRelative = frameSize*2 + blockSize*10 + gapSize*11; 
      //--Actual sizes--
      var blockSize;
      var frameSize;
      var gapSize;

      var verticalPadding = 0.05;
      var canvasScaleMultiplier = 1;

      var xCoord, yCoord;

      createBoard();
      testArray();

      function testArray(){
        var infoBox = document.getElementById("infoBox");
      
        class Coord2d{
          constructor(x, y){
              this.x = x;
              this.y = y;
          }

          clone(){
              return new Coord2d(this.x, this.y);
          }
        }
        var spawnCoordsPieceJ = [new Coord2d(3, 19),
												 new Coord2d(3, 18),
												 new Coord2d(4, 18),
                         new Coord2d(5, 18)];
                         
        var output = "Class Array:<br/>";
        for(var i = 0; i < spawnCoordsPieceJ.length; i++){
          output+= "x=" + spawnCoordsPieceJ[i].x + " , " + "y=" + spawnCoordsPieceJ[i].y + "<br/>";
        }
        output += "<br/><br/>Test Array1:<br/>";
        var _array = [
          [3,19],
          [3,18],
          [4,18],
          [5,18]  
        ]
        for(var i = 0; i < _array.length; i++){
          output+= "x=" + _array[i][0] + " , " + "y=" + _array[i][1] + "<br/>";
        }
        output += "<br/><br/>Test Array2:<br/>";
        var _array2 = [
          3,19,
          3,18,
          4,18,
          5,18
        ]
        for(var i = 0; i < _array2.length; i+=2){
          output+= "x=" + _array2[i]+ " , " + "y=" + _array2[i+1] + "<br/>";
        }

        infoBox.innerHTML= output;
      }

      function createBoard(){
        canvas.height = window.innerHeight-(verticalPadding*window.innerHeight*2);
        canvasScaleMultiplier = canvas.height/canvasHeightRelative;
        canvas.width = canvasWidthRelative * canvasScaleMultiplier;
        canvas.style.marginTop = verticalPadding*window.innerHeight + "px";


        blockSize = blockSizeRelative * canvasScaleMultiplier;
        frameSize = frameSizeRelative * canvasScaleMultiplier;
        gapSize = gapSizeRelative * canvasScaleMultiplier;

        class Block{
          constructor(xCoord, yCoord, colour){
            this.xCoord = xCoord;
            this.yCoord = yCoord;
            this.colour = colour;
          }

          setColour(colour){
            this.colour = colour;
          }

          getColour(){
            return this.colour;
          }

          draw(){
            ctx.fillStyle = this.colour;
            ctx.fillRect(this.xCoord, this.yCoord, blockSize, blockSize);
          }

        }

        ctx.lineWidth = "1";
        ctx.strokeStyle = "blue";
        ctx.fillStyle = "#4c5a61";

        //*
        for(x = 0; x < 10; x++){
          blocks.push([]);
          for(y = 0; y < 20; y++){
            ctx.beginPath();
            xCoord = (blockSize+gapSize)*x + gapSize;
            yCoord = ((blockSize+gapSize)*19)-(y*(blockSize+gapSize)) + gapSize;
            
            blocks[x].push(new Block(xCoord, yCoord, "#4c5a61"));
            ctx.fillRect(xCoord, yCoord, blockSize, blockSize);

          }
        }
        //*/
      }

      function changeColour(x, y){
        blocks[x][y].setColour("#37ccca");
        blocks[x][y].draw();
      }
      

      $(window).resize(function(){
        createBoard();
      });
  
    </script>
  


  </body>

</html>